---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import Page from '../../layouts/Page.astro';
import { ClientRouter } from 'astro:transitions';

const works = await getCollection('portfolio');
---

<Page title="Portfolio" permalink="/portfolio" description="portfolio" columns={1}>
    <style slot="head-slot">
        img {
            height: auto;
            aspect-ratio: 1;
        }

        .portfolio {
            margin: auto auto;
        }
    </style>
    <ClientRouter slot="head-slot" />
    <div class="portfolio sm:columns-2 lg:columns-3 gap-x-4 gap-y-4 w-full md:w-2/3 mx-auto">
        {
            works.map(({ data }, index) => (
                <a href={`/portfolio/${data.id}`} title={data.title} class="aspect-square" data-astro-prefetch="hover">
                    <Image
                        src={data.image}
                        alt={data.title}
                        priority={index < 6}
                        layout="full-width"
                        background="blurhash"
                        fit="cover"
                        class="mb-4"
                    />
                </a>
            ))
        }
    </div>
</Page>
